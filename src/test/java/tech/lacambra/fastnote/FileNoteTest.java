package tech.lacambra.fastnote;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

class FileNoteTest {

  String payload = "data:application/octet-stream;base64,PCFkb2N0eXBlIGh0bWw+CjxodG1sIGNsYXNzPSJuby1qcyBsYXlvdXQtcGYgbGF5b3V0LXBmLWZpeGVkIj4KPGhlYWQ+CjxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9RURHRSIvPgo8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CjxiYXNlIGhyZWY9Ii9jb25zb2xlLyI+Cjx0aXRsZT5PcGVuU2hpZnQgV2ViIENvbnNvbGU8L3RpdGxlPgo8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iIj4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEiPgo8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3BuZyIgaHJlZj0iaW1hZ2VzL2Zhdmljb24ucG5nIi8+CjxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UveC1pY29uIiBocmVmPSJpbWFnZXMvZmF2aWNvbi5pY28iLz4KPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uLXByZWNvbXBvc2VkIiBzaXplcz0iMTQ0eDE0NCIgaHJlZj0iaW1hZ2VzL2FwcGxlLXRvdWNoLWljb24tcHJlY29tcG9zZWQucG5nIj4KPGxpbmsgcmVsPSJtYXNrLWljb24iIGhyZWY9ImltYWdlcy9tYXNrLWljb24uc3ZnIiBjb2xvcj0iI0RCMjQyRiI+CjxtZXRhIG5hbWU9ImFwcGxpY2F0aW9uLW5hbWUiIGNvbnRlbnQ9Ik9wZW5TaGlmdCI+CjxtZXRhIG5hbWU9Im1zYXBwbGljYXRpb24tVGlsZUNvbG9yIiBjb250ZW50PSIjMDAwMDAwIj4KPG1ldGEgbmFtZT0ibXNhcHBsaWNhdGlvbi1UaWxlSW1hZ2UiIGNvbnRlbnQ9ImltYWdlcy9tc3RpbGUtMTQ0eDE0NC5wbmciPgo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9InN0eWxlcy92ZW5kb3IuY3NzIj4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJzdHlsZXMvbWFpbi5jc3MiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+CjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9iYWhuaHViLnRlY2gucnouZGIuZGUvYXJ0aWZhY3RvcnkvY2RhYXMtZ2VuZXJpYy1wcm9kLWxvY2FsL2NkYWFzLmNzcyI+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImNvbnNvbGUtb3MiIG5nLWNsYXNzPSJ7ICdoYXMtcHJvamVjdC1iYXInOiB2aWV3Lmhhc1Byb2plY3QsICdoYXMtcHJvamVjdC1zZWFyY2gnOiB2aWV3Lmhhc1Byb2plY3RTZWFyY2ggfSI+Cjxvc2MtaGVhZGVyPjwvb3NjLWhlYWRlcj4KPHRvYXN0LW5vdGlmaWNhdGlvbnM+PC90b2FzdC1ub3RpZmljYXRpb25zPgo8bm90aWZpY2F0aW9uLWRyYXdlci13cmFwcGVyPjwvbm90aWZpY2F0aW9uLWRyYXdlci13cmFwcGVyPgo8ZGl2IGNsYXNzPSJjb250YWluZXItcGYtbmF2LXBmLXZlcnRpY2FsIiBuZy1jbGFzcz0ieyAnY29sbGFwc2VkLW5hdic6IG5hdi5jb2xsYXBzZWQgfSI+CjxkaXYgbmctdmlldyBjbGFzcz0idmlldyI+CjxkaXYgY2xhc3M9Im1pZGRsZSI+CjxkaXYgY2xhc3M9Im1pZGRsZS1jb250ZW50Ij4KPGRpdiBjbGFzcz0iZW1wdHktc3RhdGUtbWVzc2FnZSBsb2FkaW5nIj4KPGgyIGNsYXNzPSJ0ZXh0LWNlbnRlciIgaWQ9InRlbXBvcmFyeS1sb2FkaW5nLW1lc3NhZ2UiIHN0eWxlPSJkaXNwbGF5OiBub25lIj5Mb2FkaW5nLi4uPC9oMj4KPHNjcmlwdD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcG9yYXJ5LWxvYWRpbmctbWVzc2FnZScpLnN0eWxlLmRpc3BsYXkgPSAiIjs8L3NjcmlwdD4KPC9kaXY+Cjxub3NjcmlwdD4KPGRpdiBjbGFzcz0iYXR0ZW50aW9uLW1lc3NhZ2UiPgo8aDE+SmF2YVNjcmlwdCBSZXF1aXJlZDwvaDE+CjxwPlRoZSBPcGVuU2hpZnQgd2ViIGNvbnNvbGUgcmVxdWlyZXMgSmF2YVNjcmlwdCB0byBwcm92aWRlIGEgcmljaCBpbnRlcmFjdGl2ZSBleHBlcmllbmNlLiBQbGVhc2UgZW5hYmxlIEphdmFTY3JpcHQgdG8gY29udGludWUuIElmIHlvdSBkbyBub3Qgd2lzaCB0byBlbmFibGUgSmF2YVNjcmlwdCBvciBhcmUgdW5hYmxlIHRvIGRvIHNvLCB5b3UgbWF5IHVzZSB0aGUgY29tbWFuZC1saW5lIHRvb2xzIHRvIG1hbmFnZSB5b3VyIHByb2plY3RzIGFuZCBhcHBsaWNhdGlvbnMgaW5zdGVhZC48L3A+CjwvZGl2Pgo8L25vc2NyaXB0Pgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KPHNjcmlwdCBzcmM9ImNvbmZpZy5qcyI+PC9zY3JpcHQ+CjwhLS1baWYgbHQgSUUgOV0+CiAgICA8c2NyaXB0IHNyYz0ic2NyaXB0cy9vbGRpZXNoaW0uanMiPjwvc2NyaXB0PgogICAgPCFbZW5kaWZdLS0+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3ZlbmRvci5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3RlbXBsYXRlcy5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3NjcmlwdHMuanMiPjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=";

  @Test
  void getType() {

    String attachmentPart = "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGNsYXNzPSJuby1qcyBsYXlvdXQtcGYgbGF5b3V0LXBmLWZpeGVkIj4KPGhlYWQ+CjxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9RURHRSIvPgo8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CjxiYXNlIGhyZWY9Ii9jb25zb2xlLyI+Cjx0aXRsZT5PcGVuU2hpZnQgV2ViIENvbnNvbGU8L3RpdGxlPgo8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iIj4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEiPgo8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3BuZyIgaHJlZj0iaW1hZ2VzL2Zhdmljb24ucG5nIi8+CjxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UveC1pY29uIiBocmVmPSJpbWFnZXMvZmF2aWNvbi5pY28iLz4KPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uLXByZWNvbXBvc2VkIiBzaXplcz0iMTQ0eDE0NCIgaHJlZj0iaW1hZ2VzL2FwcGxlLXRvdWNoLWljb24tcHJlY29tcG9zZWQucG5nIj4KPGxpbmsgcmVsPSJtYXNrLWljb24iIGhyZWY9ImltYWdlcy9tYXNrLWljb24uc3ZnIiBjb2xvcj0iI0RCMjQyRiI+CjxtZXRhIG5hbWU9ImFwcGxpY2F0aW9uLW5hbWUiIGNvbnRlbnQ9Ik9wZW5TaGlmdCI+CjxtZXRhIG5hbWU9Im1zYXBwbGljYXRpb24tVGlsZUNvbG9yIiBjb250ZW50PSIjMDAwMDAwIj4KPG1ldGEgbmFtZT0ibXNhcHBsaWNhdGlvbi1UaWxlSW1hZ2UiIGNvbnRlbnQ9ImltYWdlcy9tc3RpbGUtMTQ0eDE0NC5wbmciPgo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9InN0eWxlcy92ZW5kb3IuY3NzIj4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJzdHlsZXMvbWFpbi5jc3MiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+CjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9iYWhuaHViLnRlY2gucnouZGIuZGUvYXJ0aWZhY3RvcnkvY2RhYXMtZ2VuZXJpYy1wcm9kLWxvY2FsL2NkYWFzLmNzcyI+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImNvbnNvbGUtb3MiIG5nLWNsYXNzPSJ7ICdoYXMtcHJvamVjdC1iYXInOiB2aWV3Lmhhc1Byb2plY3QsICdoYXMtcHJvamVjdC1zZWFyY2gnOiB2aWV3Lmhhc1Byb2plY3RTZWFyY2ggfSI+Cjxvc2MtaGVhZGVyPjwvb3NjLWhlYWRlcj4KPHRvYXN0LW5vdGlmaWNhdGlvbnM+PC90b2FzdC1ub3RpZmljYXRpb25zPgo8bm90aWZpY2F0aW9uLWRyYXdlci13cmFwcGVyPjwvbm90aWZpY2F0aW9uLWRyYXdlci13cmFwcGVyPgo8ZGl2IGNsYXNzPSJjb250YWluZXItcGYtbmF2LXBmLXZlcnRpY2FsIiBuZy1jbGFzcz0ieyAnY29sbGFwc2VkLW5hdic6IG5hdi5jb2xsYXBzZWQgfSI+CjxkaXYgbmctdmlldyBjbGFzcz0idmlldyI+CjxkaXYgY2xhc3M9Im1pZGRsZSI+CjxkaXYgY2xhc3M9Im1pZGRsZS1jb250ZW50Ij4KPGRpdiBjbGFzcz0iZW1wdHktc3RhdGUtbWVzc2FnZSBsb2FkaW5nIj4KPGgyIGNsYXNzPSJ0ZXh0LWNlbnRlciIgaWQ9InRlbXBvcmFyeS1sb2FkaW5nLW1lc3NhZ2UiIHN0eWxlPSJkaXNwbGF5OiBub25lIj5Mb2FkaW5nLi4uPC9oMj4KPHNjcmlwdD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcG9yYXJ5LWxvYWRpbmctbWVzc2FnZScpLnN0eWxlLmRpc3BsYXkgPSAiIjs8L3NjcmlwdD4KPC9kaXY+Cjxub3NjcmlwdD4KPGRpdiBjbGFzcz0iYXR0ZW50aW9uLW1lc3NhZ2UiPgo8aDE+SmF2YVNjcmlwdCBSZXF1aXJlZDwvaDE+CjxwPlRoZSBPcGVuU2hpZnQgd2ViIGNvbnNvbGUgcmVxdWlyZXMgSmF2YVNjcmlwdCB0byBwcm92aWRlIGEgcmljaCBpbnRlcmFjdGl2ZSBleHBlcmllbmNlLiBQbGVhc2UgZW5hYmxlIEphdmFTY3JpcHQgdG8gY29udGludWUuIElmIHlvdSBkbyBub3Qgd2lzaCB0byBlbmFibGUgSmF2YVNjcmlwdCBvciBhcmUgdW5hYmxlIHRvIGRvIHNvLCB5b3UgbWF5IHVzZSB0aGUgY29tbWFuZC1saW5lIHRvb2xzIHRvIG1hbmFnZSB5b3VyIHByb2plY3RzIGFuZCBhcHBsaWNhdGlvbnMgaW5zdGVhZC48L3A+CjwvZGl2Pgo8L25vc2NyaXB0Pgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KPHNjcmlwdCBzcmM9ImNvbmZpZy5qcyI+PC9zY3JpcHQ+CjwhLS1baWYgbHQgSUUgOV0+CiAgICA8c2NyaXB0IHNyYz0ic2NyaXB0cy9vbGRpZXNoaW0uanMiPjwvc2NyaXB0PgogICAgPCFbZW5kaWZdLS0+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3ZlbmRvci5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3RlbXBsYXRlcy5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJzY3JpcHRzL3NjcmlwdHMuanMiPjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=";

    String[] result = FileNote.getParts(payload);
    assertEquals(4, result.length);
    assertEquals("application/octet-stream", result[1]);
    assertEquals("base64", result[2]);
    assertEquals(attachmentPart, result[3]);

  }
}